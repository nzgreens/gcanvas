<link rel="import"
      href="../bower_components/core-icon-button/core-icon-button.html">
<link rel="import"
      href="../bower_components/core-scaffold/core-scaffold.html">

<link rel="import" href="address-list.html">
<link rel="import" href="address-view.html">
<link rel="import" href="gcanvas-signin.html">
<link rel="import" href="twitter-signin.html">
<link rel="import" href="gcanvas-status.html">

<polymer-element name="gcanvas-app">
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
        height: 100%;
        box-sizing: border-box;
      }
    </style>
    <gcanvas-status on-authenticated="{{setLoggedIn}}" on-not-authenticated="{{setNotLoggedIn}}" on-not-verified="{{registerUser}}"></gcanvas-status>
    <template if="{{ loggedIn == false }}">
      <gcanvas-signin
        on-authenticated="{{setLoggedIn}}"
        on-not-authenticated="{{setNotLoggedIn}}"></gcanvas-signin>
      <twitter-signin></twitter-signin>
    </template>
    <template if="{{registered}}">
      <gcanvas-registration></gcanvas-registration>
    </template>
    <template if="{{ loggedIn == true }}">
      <core-scaffold responsivewidth="800px" id="core_scaffold">
        <address-list addresses="{{ addresses }}"
                      on-address-clicked="{{ showAddress }}" navigation flex>
        </address-list>
        <span id="div" tool>gCanvas</span>
        <core-icon-button tool id="refresh" flex icon="{{refreshIcon}}" on-click="{{refresh}}"></core-icon-button>
        <core-icon-button tool id="account" flex icon="{{accountIcon}}" on-click="{{setUpAccount}}"></core-icon-button>
        <div main>
          <address-view address="{{appState.address}}"
                        on-response-submit="{{submitResponse}}"
                        on-address-done="{{hideAddress}}"
                        on-address-next="{{nextAddress}}">
          </address-view>
        </div>
      </core-scaffold>
    </template>
  </template>
  <script type="application/dart" src="gcanvas_app.dart"></script>
</polymer-element>
