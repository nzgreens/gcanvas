<link rel="import" href="../../../packages/polymer/polymer.html">

<link rel="import"
      href="../../../packages/paper_elements/paper_icon_button.html">
<link rel="import" href="../../../packages/core_elements/core_menu.html">
<link rel="import" href="../../../packages/core_elements/core_item.html">
<link rel="import" href="../../../packages/core_elements/core_media_query.html">
<link rel="import"
      href="../../../packages/core_elements/core_header_panel.html">
<link rel="import"
      href="../../../packages/core_elements/core_icons.html">
<link rel="import"
      href="../../../packages/core_elements/core_drawer_panel.html">
<link rel="import"
      href="../../../packages/core_elements/core_toolbar.html">

<link rel="import" href="address-list.html">
<link rel="import" href="address-view.html">
<link rel="import" href="gcanvas-signin.html">
<link rel="import" href="twitter-signin.html">
<link rel="import" href="gcanvas-status.html">
<link rel="import" href="register-user.html">
<link rel="import" href="gcanvas-registration.html">
<link rel="import" href="route/app-route.html">
<link rel="import" href="database/user-db.html">


<polymer-element name="gcanvas-app">
  <template>
    <style>
      :host {
        position: absolute;
        display: block;
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        font-family: RobotoDraft, Helvetica, Arial;
      }
      
      
      [drawer] {
        background-color: #fff;
      }
      
      [main] > div {
        padding: 2em;
        
      }
      
      [drawer] > core-item {
        padding: 1em;
      }
      
      [main] paper-checkbox {
        margin-right: 1em;
      }
      
      [main] {
        height: 100%;
        background-color: #f1f1f3;
      }
      
      [drawer] core-toolbar {
        background-color: #4F7DC9;
        color: #fff;
      }
      
      [main] core-toolbar {
        background-color: #526E9C;
        color: #fff;
      }
      
      paper-fab {
        background-color: #e0a30b;
        position: absolute !important;
        bottom: -27px;
        right: 1em;
        z-index: 10;
      }
      
      .card {
        width: 300px;
        background-color: #fff;
        padding: 1em;
        margin: 1em;
        position: relative;
      }
      
      *[data-fade-selected="true"] .item[data-done="true"] {
        opacity: 0.3;
      }
      
      paper-button[raisedButton].colored {
        width: 100%;
        background: #4285f4;
        color: #fff;
        fill: #fff;
      }
      
      .fit {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      }
      
      core-icon-button {
        display: inline-block;
      }
    </style>
    
    <core-media-query query="max-width: 800px" queryMatches="{{phoneScreen}}"></core-media-query>
    <gcanvas-status id="status"></gcanvas-status>
    
    <app-route route="/signin">
      <gcanvas-signin></gcanvas-signin>
      <register-user-button></register-user-button>
    </app-route>
    
    <app-route route="/register">
      <gcanvas-registration on-registered="{{ registered }}"></gcanvas-registration>
    </app-route>
    
    <app-route route="/home">
      <core-drawer-panel id="panel" responsiveWidth="800px">
        <core-header-panel drawer id="drawer" mode="waterfall">
          <core-toolbar>
            <span id="addresses">Addresses</span>
            <paper-icon-button icon="{{ menuIcon }}" on-click="{{ reverseAddresses }}"></paper-icon-button>
          </core-toolbar>
          <div>
          <address-list addresses="{{ addresses }}"
                        on-address-clicked="{{ showAddress }}">
          </address-list>
          </div>
        </core-header-panel>
        <core-header-panel main mode="waterfall">
          <core-toolbar>
            <paper-icon-button icon="{{ menuIcon }}" on-click="{{ menu }}"></paper-icon-button>
            <span id="div" tool>gCanvas</span>
            <paper-icon-button id="refresh" role="button" icon="{{ refreshIcon }}" on-click="{{ refresh }}"></paper-icon-button>
            <paper-icon-button id="account" role="button" icon="{{ accountIcon }}" on-click="{{ setUpAccount }}"></paper-icon-button>
            <div flex>&nbsp;</div>
          </core-toolbar>
          <address-view address="{{ appState.address }}"
                        on-response-submit="{{ submitResponse }}"
                        on-address-prev="{{ prevAddress }}"
                        on-address-next="{{ nextAddress }}">
          </address-view>
        </core-header-panel>
      </core-drawer-panel>
    </app-route>
  </template>
  <script type="application/dart" src="gcanvas_app.dart"></script>
</polymer-element>
